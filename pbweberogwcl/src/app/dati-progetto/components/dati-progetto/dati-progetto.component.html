<mat-spinner-pbandi class="page centerPage" [ngClass]="{'displayNone': !isLoading()}"></mat-spinner-pbandi>
<div class="page mx-24" [ngClass]="{'displayNone': isLoading()}" id="scrollId">
	<div class="title">
		<div class="backContainer">
			<button (click)="tornaAAttivitaDaSvolgere()" mat-button>
				<mat-icon class="blue-icon">keyboard_backspace</mat-icon>
				<span class="backText">Torna alle attivit√† da svolgere</span>
			</button>
		</div>
		<div>
			<h2>{{ title }}</h2>
		</div>
	</div>

	<div class="content">
		<mat-card class="mat-elevation-z2 messageSuccess" *ngIf="isMessageSuccessVisible">
			<mat-card-content class="messageSuccessContent">
				<p [innerHTML]="messageSuccess | safeHTML"></p>
			</mat-card-content>
		</mat-card>
		<mat-card class="mat-elevation-z2 messageWarning" *ngIf="isMessageWarningVisible">
			<mat-card-content class="messageWarningContent">
				<p [innerHTML]="messageWarning | safeHTML"></p>
			</mat-card-content>
		</mat-card>
		<mat-card class="mat-elevation-z2 messageError" *ngIf="isMessageErrorVisible">
			<mat-card-content class="messageErrorContent">
				<p [innerHTML]="messageError | safeHTML"></p>
			</mat-card-content>
		</mat-card>

		<!-- Dati progetto e beneficiario -->
		<mat-card class="mat-elevation-z2">
			<mat-card-content>
				<div class="display-flex justify-content-space-between">
					<div>
						<div class="cod-progetto">
							<p>Beneficiario: <span class="bold-text">{{user?.beneficiarioSelezionato.denominazione}}</span></p>
						</div>
						<div class="cod-progetto">
							<p>Codice progetto: <span class="bold-text">{{codiceProgetto}}</span></p>
							<button class="button-style-1 paddingLeft20" mat-button
								(click)="goToDatiProgettoEAttivitaPregresse()">DATI
								PROGETTO ATTIVIT&Agrave; PREGRESSE</button>
							<button class="button-style-1 paddingLeft20" mat-button (click)="goToContoEconomico()">CONTO
								ECONOMICO</button>
						</div>
					</div>
					<pbcommon-help *ngIf="user?.codiceRuolo" [apiURL]="apiURL" [user]="user"
						[descBrevePagina]="descBrevePagina"></pbcommon-help>
				</div>
			</mat-card-content>
		</mat-card>

		<mat-tab-group dynamicHeight #tabs (selectedIndexChange)="onTabChange()" class="mt-12 mat-elevation-z2"
			mat-stretch-tabs>
			<mat-tab label="DATI GENERALI">
				<app-dati-generali [idProgetto]="idProgetto" [idBandoLinea]="idBando" [datiSif]="datiSif"
					(messageError)="messageErrorFromChild($event)" (messageSuccess)="messageSuccessFromChild($event)"
					[isProgrammazione2127]="isProgrammazione2127" (datiSifEvent)="datiSifFromChild($event)"></app-dati-generali>
			</mat-tab>
			<mat-tab label="DATI SIF" *ngIf="isTabDatiSifVisible()">
				<app-dati-sif [idProgetto]="idProgetto" [datiSif]="datiSif" (messageError)="messageErrorFromChild($event)"
					(messageSuccess)="messageSuccessFromChild($event)"></app-dati-sif>
			</mat-tab>
			<mat-tab label="DATI AGGIUNTIVI" *ngIf="isBR59">
				<app-dati-aggiuntivi [idProgetto]="idProgetto" (messageError)="messageErrorFromChild($event)"
					(messageSuccess)="messageSuccessFromChild($event)"></app-dati-aggiuntivi>
			</mat-tab>
			<mat-tab label="ALLEGATI" *ngIf="isTabAllegatiVisible()">
				<!--sezione in sola visualizzazione tranne che per la regola BR64: nascosti pulsanti aggiungi allegati e disassociazione-->
				<app-allegati [idProgetto]="idProgetto" [allegati]="allegati" [isBR64]="isBR64" [user]="user"
					(messageError)="messageErrorFromChild($event)"
					(messageSuccess)="messageSuccessFromChild($event)"></app-allegati>
			</mat-tab>
			<mat-tab label="DATI BENEFICIARIO E SEDI" *ngIf="!isHideTabSedi">
				<app-dati-benef-sedi [idProgetto]="idProgetto" [soggettiProgetto]="soggettiProgetto"
					(messageError)="messageErrorFromChild($event)"
					(messageSuccess)="messageSuccessFromChild($event)"></app-dati-benef-sedi>
			</mat-tab>
			<mat-tab label="SOGGETTI">
				<app-soggetti [idProgetto]="idProgetto" [idBando]="idBando" [isBenPersonaFisica]="isBenPersonaFisica"
					[soggettiProgetto]="soggettiProgetto" (loadSoggettiProgetto)=loadSoggettiProgetto($event)
					(messageError)="messageErrorFromChild($event)" (messageSuccess)="messageSuccessFromChild($event)"
					(messageWarning)="messageWarningFromChild($event)"></app-soggetti>
			</mat-tab>
			<mat-tab label="BLOCCHI" *ngIf="bandoCompetenzaFinpiemonte && costanteFinpiemonte">
				<app-blocchi [idProgetto]="idProgetto" [idBando]="idBando" (messageError)="messageErrorFromChild($event)"
					(messageSuccess)="messageSuccessFromChild($event)"
					(messageWarning)="messageWarningFromChild($event)"></app-blocchi>
			</mat-tab>
		</mat-tab-group>
	</div>
</div>