DECLARE
  CURSOR curProgetto IS SELECT * FROM PBANDI_T_PROGETTO;
  nIdProgetto  PBANDI_T_DATI_PROGETTO_MONIT.ID_PROGETTO%TYPE;
BEGIN
  FOR recProgetto IN curProgetto LOOP  
    BEGIN
	  SELECT ID_PROGETTO
	  INTO   nIdProgetto
	  FROM   PBANDI_T_DATI_PROGETTO_MONIT
	  WHERE  ID_PROGETTO = recProgetto.ID_PROGETTO;	
	EXCEPTION
      WHEN NO_DATA_FOUND THEN
        INSERT INTO PBANDI_T_DATI_PROGETTO_MONIT
		(ID_PROGETTO,ID_UTENTE_INS)
		VALUES
		(recProgetto.ID_PROGETTO,recProgetto.ID_UTENTE_INS);
   END;
  END LOOP;
  COMMIT;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('ERRORE = '||SQLERRM);
	ROLLBACK;
END;
/	