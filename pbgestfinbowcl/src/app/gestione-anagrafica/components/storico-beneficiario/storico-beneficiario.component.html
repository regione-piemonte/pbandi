<!-- <mat-spinner-pbandi [hidden]="!this.isLoading()"></mat-spinner-pbandi>
 -->
<div class="page">
  <mat-spinner-pbandi [hidden]="!spinner"></mat-spinner-pbandi>
  <div class="title">
    <div class="reportingContainerUp">
      <app-torna-indietro [backText]="setBackText"></app-torna-indietro>
      <div>
        <h2>Storico beneficiario</h2>
      </div>
    </div>
  </div>

  <!--                                             STORICO BENEFICIARIO GIURIDICO                                         -->
  <div *ngIf="isEnteGiuridico">
    <div class="content">
      <mat-card class="mat-elevation-z2">
        <mat-card-content>
          <div>
            <div>
              <form [formGroup]="myForm">
                <div class="row">
                  <mat-form-field class="col denom">
                    <mat-label>Ragione Sociale</mat-label>
                    <input type="text" matInput formControlName="denominazione" disabled />
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field class="col">
                    <mat-label>Codice fiscale</mat-label>
                    <input type="text" matInput formControlName="cF" [disabled]="true" />
                  </mat-form-field>
                  <mat-form-field class="col">
                    <mat-label>NDG</mat-label>
                    <input type="text" matInput formControlName="idSogg" [disabled]="true" />
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field class="col">
                    <mat-label>Partita IVA</mat-label>
                    <input type="text" matInput formControlName="pIva" [disabled]="true" />
                  </mat-form-field>
                  <mat-form-field class="col">
                    <mat-label>Tipologia soggetto</mat-label>
                    <input type="text" matInput formControlName="tipoSogg" [disabled]="true" />
                  </mat-form-field>
                </div>
              </form>
            </div>

            <div>
              <h3>Elenco versioni</h3>
              <div *ngIf="!emptyTable">
                <mat-divider class="divider" [inset]="true"></mat-divider>
                <div class="row">
                  <table mat-table [dataSource]="dataSource" class="tableVersioni">
                    <ng-container matColumnDef="idVersione">
                      <th mat-header-cell *matHeaderCellDef> <b>Identificativo versione</b> </th>
                      <td mat-cell *matCellDef="let element"> {{element?.idVersione}} </td>
                    </ng-container>
                    <ng-container matColumnDef="dataRiferimento">
                      <th mat-header-cell *matHeaderCellDef> Data Riferimento </th>
                      <td mat-cell *matCellDef="let element"> {{element?.dataRiferimento}} </td>
                    </ng-container>
                    <ng-container matColumnDef="denom">
                      <th mat-header-cell *matHeaderCellDef>Istruttore</th>
                      <td mat-cell *matCellDef="let element"> {{element?.denom}} </td>
                    </ng-container>
                    <ng-container matColumnDef="azioni">
                      <th mat-header-cell *matHeaderCellDef></th>
                      <td mat-cell *matCellDef="let element">
                        <button mat-icon-button style="width: 30px;" matTooltip="Visualizza"
                          (click)="visualizzaStoricoDomanda(element)">
                          <mat-icon>info</mat-icon>
                        </button>
                      </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </table>
                </div>
              </div>
              <div *ngIf="emptyTable">
                    Nessuna versione trovata.
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!--                                             STORICO BENEFICIARIO FISICO                                         -->

  <div *ngIf="!isEnteGiuridico">
    <div class="content">
      <mat-card class="mat-elevation-z2">
        <mat-card-content>
          <div>
            <div>
              <form [formGroup]="myForm">
                <div class="row">
                  <mat-form-field class="col denom">
                    <mat-label>NDG</mat-label>
                    
                    <input type="text" matInput formControlName="idSoggetto" disabled />
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field class="col">
                    <mat-label>Nome</mat-label>
                    <input type="text" matInput formControlName="nome" [disabled]="true" />
                  </mat-form-field>
                  <mat-form-field class="col">
                    <mat-label>Cognome</mat-label>
                    <input type="text" matInput formControlName="cognome" [disabled]="true" />
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field class="col">
                    <mat-label>Tipologia Soggetto</mat-label>
                    <input type="text" matInput formControlName="tipoSoggetto" [disabled]="true" />
                  </mat-form-field>
                  <mat-form-field class="col">
                    <mat-label>Codice Fiscale</mat-label>
                    <input type="text" matInput formControlName="codiceFiscale" [disabled]="true" />
                  </mat-form-field>
                </div>
              </form>
            </div>

            <div>
              <h3>Elenco versioni</h3>
              <div *ngIf="!emptyTable">
                <mat-divider class="divider" [inset]="true"></mat-divider>
                <div class="row">
                  <table mat-table [dataSource]="dataSource" class="tableVersioni">
                    <ng-container matColumnDef="idVersione">
                      <th mat-header-cell *matHeaderCellDef> <b>Identificativo versione</b> </th>
                      <td mat-cell *matCellDef="let element"> {{element.idVersione}} </td>
                    </ng-container>
                    <ng-container matColumnDef="dataRiferimento">
                      <th mat-header-cell *matHeaderCellDef> Data Riferimento </th>
                      <td mat-cell *matCellDef="let element"> {{element.dataRiferimento}} </td>
                    </ng-container>
                    <ng-container matColumnDef="denom">
                      <th mat-header-cell *matHeaderCellDef>Istruttore</th>
                      <td mat-cell *matCellDef="let element"> {{element.denom}} </td>
                    </ng-container>
                    <ng-container matColumnDef="azioni">
                      <th mat-header-cell *matHeaderCellDef></th>
                      <td mat-cell *matCellDef="let element">
                        <button mat-icon-button style="width: 30px;" matTooltip="Visualizza"
                          (click)="visualizzaStoricoDomandaPF(element)">
                          <mat-icon>info</mat-icon>
                        </button>
                      </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </table>
                </div>
              </div>
              <div *ngIf="emptyTable">
                    Nessuna versione trovata.
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
